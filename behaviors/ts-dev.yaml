# TypeScript/JavaScript Development Behavior
#
# Provides comprehensive TypeScript/JavaScript development capabilities:
# - Code quality checking (ESLint, Prettier, tsc, stub detection)
# - Automatic checking on file edits (hook)
# - Expert agents: ts-dev, react-dev, nextjs-dev, node-dev
#
# Include this behavior to add TypeScript/JavaScript development tools to any bundle.

bundle:
  name: ts-dev-behavior
  version: 0.1.0
  description: TypeScript/JavaScript development tools - quality checks, auto-checking hook, and framework-specific agents

# Tools provided by this behavior
tools:
  - module: tool-ts-check
    source: git+https://github.com/microsoft/amplifier-bundle-ts-dev@main#subdirectory=modules/tool-ts-check
    config:
      # Default configuration - can be overridden in package.json
      default_checks:
        - eslint
        - prettier
        - tsc
        - stubs

# Hooks provided by this behavior
hooks:
  - module: hooks-ts-check
    source: git+https://github.com/microsoft/amplifier-bundle-ts-dev@main#subdirectory=modules/hooks-ts-check
    config:
      # Enable automatic checking on TypeScript/JavaScript file edits
      enabled: true
      # File patterns to check
      file_patterns:
        - "*.ts"
        - "*.tsx"
        - "*.js"
        - "*.jsx"
        - "*.mts"
        - "*.mjs"
        - "*.cts"
        - "*.cjs"
      # Minimum severity to report: error | warning | info
      report_level: warning
      # Inject issues into agent context for awareness
      auto_inject: true
      # Which checks to run on every edit
      checks:
        - eslint
        - prettier
        - tsc

# Agents provided by this behavior
# Note: descriptions must be defined here - the bundle loader doesn't parse agent markdown meta sections
# Agent naming convention: bundle-name:agent-name (without 'agents/' prefix - loader looks in agents/ automatically)
agents:
  ts-dev:ts-dev:
    description: "Expert TypeScript/JavaScript developer with integrated code quality and LSP tooling. Use PROACTIVELY when checking code quality (linting, types, formatting), understanding code structure, debugging TypeScript-specific issues, or reviewing code for best practices."
  ts-dev:react-dev:
    description: "Expert React developer specializing in hooks, component patterns, performance, and testing. Use PROACTIVELY when working with React components/hooks/JSX, debugging re-render issues or stale closures, reviewing React code, or extracting custom hooks."
  ts-dev:nextjs-dev:
    description: "Expert Next.js developer specializing in App Router, Server Components, data fetching, and SSR/SSG. Use PROACTIVELY when working with Next.js projects, debugging hydration errors, optimizing caching strategies, or migrating from Pages Router to App Router."
  ts-dev:node-dev:
    description: "Expert Node.js backend developer specializing in async patterns, error handling, security, and APIs. Use PROACTIVELY when working with Node.js backend code (Express, Fastify), debugging async issues or memory leaks, reviewing code for security vulnerabilities, or designing REST APIs."

# Context files loaded with this behavior
context:
  include:
    - ts-dev:context/ts-dev-instructions.md
